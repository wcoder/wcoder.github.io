<!DOCTYPE html> <html prefix="og: http://ogp.me/ns#" lang="ru"> <head> <meta charset="utf-8" /> <meta http-equiv="X-UA-Compatible" content="IE=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /> <title>Создание кастомных ячеек для UITableView с помощью Xamarin и XIB - YP Tech Notes</title> <meta name="description" content="Иногда, когда мы создаем iOS приложение с помощью Xamarin, мы отказываемся от использования сторибордов (storyboard) и просто создаем пользовательский интерф..." /> <meta name="keywords" content="ios, xamarin" /> <meta name="author" content="Yauheni Pakala"> <meta property="og:title" content="Создание кастомных ячеек для UITableView с помощью Xamarin и XIB - YP Tech Notes" /> <meta property="og:description" content="Иногда, когда мы создаем iOS приложение с помощью Xamarin, мы отказываемся от использования сторибордов (storyboard) и просто создаем пользовательский интерф..." /> <meta property="og:url" content="https://wcoder.github.io/notes/custom-uitableviewcells-with-xamarin-and-xibs" /> <meta property="og:site_name" content="YP Tech Notes" /> <meta property="og:locale" content="ru_RU" /> <meta property="og:type" content="article" /> <meta property="article:author" content="Yauheni Pakala" /> <meta property="article:published_time" content="2016-03-16T23:40:00+03:00" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:creator" content="@yauhenipakala" /> <meta name='yandex-verification' content='7cd440e16ce6e1c3' /> <link rel="icon" type="image/x-icon" href="/images/favicon.ico" /> <link rel="stylesheet" href="/css/main.css" /> <link rel="stylesheet" href="/css/github.min.css" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="YP Tech Notes" /> <meta name="apple-mobile-web-app-title" content="YP Tech Notes" /> <meta name="theme-color" content="#333" /> <meta name="msapplication-navbutton-color" content="#333" /> <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" /> <meta name="msapplication-starturl" content="/" /> <link rel="manifest" href="/api/manifest.json" /> <link rel="canonical" href="https://wcoder.github.io/notes/custom-uitableviewcells-with-xamarin-and-xibs" /> <link rel="alternate" type="application/atom+xml" title="YP Tech Notes" href="https://wcoder.github.io/atom.xml" /> </head> <body> <header class="site-header"><div class="wrapper"> <a class="site-title" href="/" title="Перейти на главную">Tech Notes</a> <nav class="site-nav"> <a href="#" class="menu-icon" title="Развернуть меню"> <svg xmlns="http://www.w3.org/2000/svg" height="29" viewBox="0 0 48 48" width="48"><path d="M0 0h48v48h-48z" fill="none"></path><path d="M6 36h36v-4h-36v4zm0-10h36v-4h-36v4zm0-14v4h36v-4h-36z"></path> </svg> </a><div class="trigger"> <a class="page-link" href="https://ypakala.com/">Об авторе</a> <a class="page-link" href="/archive/">Архив</a> <a class="page-link" href="/search/">Поиск</a> <a class="page-link" href="/atom.xml"><i class="fa fa-rss"></i> RSS</a></div></nav></div></header><div class="page-content"><div class="wrapper"> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"><h1 class="post-title" itemprop="name headline">Создание кастомных ячеек для UITableView с помощью Xamarin и XIB</h1><p class="post-meta"> <time datetime="2016-03-16T23:40:00+03:00" itemprop="datePublished">16.03.2016 в 23:40</time></p></header><div class="post-content" itemprop="articleBody"><p>Иногда, когда мы создаем iOS приложение с помощью Xamarin, мы отказываемся от использования сторибордов (storyboard) и просто создаем пользовательский интерфейс в C# коде. Это прекрасно работает, но когда используем <strong>UITableView</strong>, бывают случаи, когда мы хотим сделать дизайн <strong>UITableViewCell</strong> с помощью дизайнера. К счастью, это достаточно легко сделать с помощью одного <em>.xib</em> файла в Xamarin Studio.</p><h3 id="создание-проекта">Создание проекта</h3><p>Для этого примера, мы начнем с создания пустого проекта.</p><blockquote><p>File -&gt; New Solution -&gt; iOS -&gt; iPhone -&gt; Empty Project</p></blockquote> <h3 id="создание-таблицы">Создание таблицы</h3><p>Далее, добавим новый класс для нашего <strong>UITableViewController</strong>, назовем <em>MyTableViewController.cs</em>. В <em>AppDelegate.cs</em>, установим RootViewController равным нашему новому классу. Загрузим наши данные в <strong>MyTableViewController</strong>, установив свойство <code>TableView.Source</code>.</p><pre><code class="language-csharp">public override void ViewDidLoad ()
{
	base.ViewDidLoad ();

	var conferences = ConferenceRepository.GetConferences ();
	TableView.Source = new MyTableViewSource (conferences);
}
</code></pre><h3 id="создание-ячейки">Создание ячейки</h3><p>К этому моменту, мы еще не использовали дизайнер для нашего UI. На самом деле, у нас еще нет ни одного <em>.storyboard</em> или <em>.xib</em> файла в проекте. Для того, чтобы сделать дизайн ячеек нашей таблицы, мы создадим одну сейчас. Мы добавим новый файл, выбрав шаблон <em>Table View Cell</em> и назовем его <em>MyCustomCell.xib</em>.</p><blockquote><p>Add -&gt; New File -&gt; iOS -&gt; Table View Cell</p></blockquote><p><img src="https://raw.githubusercontent.com/wcoder/blog/master/uitableviewcells-xamarin-xibs/Untitled.jpg" alt="Создание xib файла" /></p><p>Далее, открываем создавшийся <em>.xib</em> файл, перетаскиваем элементы управления из панели элементов. Укажем контролам имена, для последующего с ними взаимодействия.</p><p><img src="https://raw.githubusercontent.com/wcoder/blog/master/uitableviewcells-xamarin-xibs/Untitled2.jpg" alt="Дизайн ячейки в Xamarin Studio" /></p><p>После этого дизайнер сгенерирует нам оутлеты (outlet) для доступа к UI элементам, они будут располагаться в файле <em>MyCustomCell.designer.cs</em></p><pre><code class="language-csharp">using MonoTouch.Foundation;
using System.CodeDom.Compiler;

namespace XibTableCellDesign
{
	[Register ("MyCustomCell")]
	partial class MyCustomCell
	{
		[Outlet]
		MonoTouch.UIKit.UILabel ConferenceDescription { get; set; }

		[Outlet]
		MonoTouch.UIKit.UILabel ConferenceName { get; set; }

		[Outlet]
		MonoTouch.UIKit.UILabel ConferenceStart { get; set; }

		void ReleaseDesignerOutlets ()
		{
			if (ConferenceDescription != null) {
				ConferenceDescription.Dispose ();
				ConferenceDescription = null;
			}

			if (ConferenceName != null) {
				ConferenceName.Dispose ();
				ConferenceName = null;
			}

			if (ConferenceStart != null) {
				ConferenceStart.Dispose ();
				ConferenceStart = null;
			}
		}
	}
}
</code></pre><h3 id="добавляем-модель">Добавляем модель</h3><p>Обратите внимание, что оутлеты - приватные. Поэтому у нас нет доступа к элементам интерфейса из метода <code>GetCell</code> нашего <strong>UITableViewSource</strong>, как это обычно делается - <code>label.Text = value</code>. Мы можем обойти эту проблему, добавив публичное свойство в нашей кастомной ячейке, чтобы установить модель данных.</p><pre><code class="language-csharp">public partial class MyCustomCell : UITableViewCell
{
	public Conference Model { get; set; }
}
</code></pre><p>Затем, в методе <code>LayoutSubviews</code> нашей ячейки, мы можем установить свойства для элементов ячейки из свойств модели данных.</p><pre><code class="language-csharp">public override void LayoutSubviews ()
{
	base.LayoutSubviews ();

	this.ConferenceName.Text = Model.Name;
	this.ConferenceStart.Text = Model.StartDate.ToShortDateString ();
	this.ConferenceDescription.Text = Model.Description;
}
</code></pre><h3 id="использование-ячейки">Использование ячейки</h3><p>Последний шаг - создать и использовать ячейку в нашей таблице:</p><pre><code class="language-csharp">public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
{
	var conference = _conferences [indexPath.Row];
	var cell = (MyCustomCell)tableView.DequeueReusableCell (MyCustomCell.Key);
	if (cell == null) {
		cell = MyCustomCell.Create ();
	}
	cell.Model = conference;

	return cell;
}
</code></pre><p><img src="https://raw.githubusercontent.com/wcoder/blog/master/uitableviewcells-xamarin-xibs/CustomTableViewCells-1.png" alt="результат" /></p><p>Пример приложения можно найти в <a href="https://github.com/RobGibbens/XibTableCellDesign">репозитории на GitHub</a>.</p><p>Источник: <a href="http://arteksoftware.com/custom-uitableviewcells-with-xamarin-and-xibs/">Custom UITableViewCells with Xamarin and XIBs</a></p><p>Теги: <a href="/tags/#ios">ios</a>, <a href="/tags/#xamarin">xamarin</a></p><p class="edit-post-btn"> <!--noindex--><a href="https://github.com/wcoder/wcoder.github.io/edit/master/_posts/2016-03-16-custom-uitableviewcells-with-xamarin-and-xibs.md" rel="nofollow" title="Редактировать страницу на GitHub">Редактировать</a><!--/noindex--></p><div class="share-btn"> <a class="btn-vk" data-id="vk" title="VK"><img alt="VK" width="16" src="/images/vk.svg" /></a> <a class="btn-facebook" data-id="fb" title="Facebook"><img alt="Facebook" width="16" src="/images/facebook.svg" /></a> <a class="btn-twitter" data-id="tw" title="Twitter"><img alt="Twitter" width="16" src="/images/twitter.svg" /></a> <a class="btn-telegram" data-id="tg" title="Telegram"><img alt="Telegram" width="16" src="/images/telegram.svg" /></a> <a class="btn-mail" data-id="mail" title="Email"><img alt="Email" width="16" src="/images/mail.svg" /></a></div></div></article></div></div><hr /><div class="wrapper"> <footer class="footer"><p class="copyrights"> &copy; 2014&ndash;<span itemprop="copyrightYear">2025</span></p><p xmlns:cc="http://creativecommons.org/ns#" class="license"> <a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" title="This work is licensed under CC BY-SA 4.0"> <img style="height:20px!important;" src="https://licensebuttons.net/l/by-sa/4.0/88x31.png" alt="CC BY-SA 4.0"> </a></p></footer></div><script src="/js/highlight.pack.js"></script> <script src="/js/highlightjs-line-numbers.min.js"></script> <script> hljs.initHighlightingOnLoad(); hljs.initLineNumbersOnLoad(); </script> <script src="/js/share-buttons.js"></script> <!--Generated with Jekyll at Nov. 11, 2025 11:59:43 AM (+03)--> </body> </html>
